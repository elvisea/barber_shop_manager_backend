---
alwaysApply: true
---

# ‚ùó Tratamento de Exce√ß√µes

As exce√ß√µes lan√ßadas na aplica√ß√£o devem seguir um padr√£o centralizado com `CustomHttpException` e `ErrorMessageService`.

## ‚úÖ Regras

- Usar `CustomHttpException` em toda exce√ß√£o controlada.
- Obter mensagens padronizadas do `ErrorMessageService`.
- Registrar logs com `Logger` se necess√°rio.

## üìå Exemplo

```ts
if (!establishment) {
  const message = this.errorMessageService.getMessage(
    ErrorCode.ESTABLISHMENT_NOT_FOUND_OR_ACCESS_DENIED,
    { ESTABLISHMENT_ID: request.establishmentId, OWNER_ID: ownerId },
  );

  this.logger.warn(message);

  throw new CustomHttpException(
    message,
    HttpStatus.NOT_FOUND,
    ErrorCode.ESTABLISHMENT_NOT_FOUND_OR_ACCESS_DENIED,
  );
}
```