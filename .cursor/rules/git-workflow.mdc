---
description: Fluxo de Git e Pull Requests para o projeto
globs: ["**/*.ts", "**/*.js", "**/*.json"]
alwaysApply: false
---

# ğŸŒ¿ Git Workflow - Barber Shop Manager

Este documento define o fluxo de Git, branches e Pull Requests para o projeto NestJS.

---

## ğŸŒ³ **ESTRUTURA DE BRANCHES**

### **Branches Principais:**
- **`main`**: CÃ³digo de produÃ§Ã£o (protegida)
- **`develop`**: CÃ³digo de desenvolvimento (protegida) - **BRANCH PRINCIPAL PARA PRs**
- **`feature/*`**: Features em desenvolvimento
- **`fix/*`**: CorreÃ§Ãµes de bugs
- **`hotfix/*`**: CorreÃ§Ãµes urgentes para produÃ§Ã£o

### **Fluxo de Branches:**
- **Features/Fixes** â†’ `develop` â†’ `main`
- **Hotfixes** â†’ `main` (urgente) â†’ `develop` (backport)

### **ProteÃ§Ãµes:**
- âŒ **NUNCA** commit direto em `main` ou `develop`
- âœ… **SEMPRE** usar Pull Requests
- âœ… **SEMPRE** revisÃ£o obrigatÃ³ria
- âœ… **SEMPRE** testes passando

---

## ğŸš€ **FLUXO DE DESENVOLVIMENTO**

### **1. Preparar Ambiente**
```bash
# Atualizar develop
git checkout develop
git pull origin develop

# Criar branch para feature
git checkout -b feature/issue-123-add-user-validation

# Ou para fix
git checkout -b fix/issue-456-auth-token-error
```

### **2. Desenvolver Feature**
```bash
# Fazer alteraÃ§Ãµes no cÃ³digo
# ... desenvolvimento ...

# Verificar status
git status
git diff

# Adicionar arquivos seletivamente
git add -p

# Commit com mensagem padronizada
git commit -m "feat(user): add email validation"

# Push para branch
git push origin feature/issue-123-add-user-validation
```

### **3. Criar Pull Request**
- [ ] TÃ­tulo descritivo
- [ ] DescriÃ§Ã£o detalhada
- [ ] Link para issue
- [ ] Screenshots (se aplicÃ¡vel)
- [ ] Checklist preenchido

---

## ğŸ“ **NOMENCLATURA DE BRANCHES**

### **PadrÃ£o ObrigatÃ³rio:**
```
{tipo}/issue-{numero}
```

### **Tipos Aceitos:**
- `feature`: Nova funcionalidade
- `fix`: CorreÃ§Ã£o de bug
- `hotfix`: CorreÃ§Ã£o urgente
- `refactor`: RefatoraÃ§Ã£o
- `docs`: DocumentaÃ§Ã£o

### **Exemplos:**
```bash
feature/issue-123
fix/issue-456
hotfix/issue-789
refactor/issue-101
docs/issue-202
```

---

## ğŸ”„ **FLUXO DE PULL REQUEST**

### **Template de PR:**
```markdown
## ğŸ“‹ DescriÃ§Ã£o

[DescriÃ§Ã£o das mudanÃ§as realizadas]

## ğŸ”— Issue Relacionada

Closes #123

## ğŸ”§ Tipo de MudanÃ§a

- [ ] Bug fix
- [ ] Nova feature
- [ ] Breaking change
- [ ] RefatoraÃ§Ã£o
- [ ] DocumentaÃ§Ã£o

## âœ… Checklist

- [ ] CÃ³digo compila sem erros
- [ ] Testes passam
- [ ] MigraÃ§Ãµes executam
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Commit messages seguem padrÃ£o
- [ ] CÃ³digo revisado

## ğŸ“¸ Screenshots

[Se aplicÃ¡vel, adicionar screenshots]

## ğŸ§ª Como Testar

[Passos para testar as mudanÃ§as]
```

---

## ğŸ“‹ **REGRAS DE COMMIT**

### **Formato ObrigatÃ³rio:**
```
<tipo>(<escopo>): <descriÃ§Ã£o>
```

### **Tipos Aceitos:**
- `feat`: Nova funcionalidade
- `fix`: CorreÃ§Ã£o de bug
- `docs`: DocumentaÃ§Ã£o
- `style`: FormataÃ§Ã£o
- `refactor`: RefatoraÃ§Ã£o
- `perf`: Performance
- `test`: Testes
- `chore`: ManutenÃ§Ã£o

### **Exemplos:**
```bash
feat(auth): add password reset functionality
fix(user): handle email validation error
docs(api): update authentication endpoints
refactor(service): simplify user creation logic
chore(deps): update dependencies
```

---

## ğŸ” **REVISÃƒO DE CÃ“DIGO**

### **Checklist para Revisores:**
- [ ] CÃ³digo segue padrÃµes do projeto
- [ ] LÃ³gica estÃ¡ correta
- [ ] Tratamento de erros adequado
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Testes adequados
- [ ] Performance considerada
- [ ] SeguranÃ§a verificada

### **Checklist para Autor:**
- [ ] PR tem descriÃ§Ã£o clara
- [ ] Issue vinculada corretamente
- [ ] CÃ³digo testado localmente
- [ ] Conflitos resolvidos
- [ ] Feedback do revisor incorporado

---

## ğŸš¨ **REGRAS CRÃTICAS**

### **NUNCA Fazer:**
- âŒ Commit direto em `main` ou `develop`
- âŒ Merge sem Pull Request
- âŒ Commits com mensagens vagas
- âŒ Branches com nomes nÃ£o padronizados
- âŒ PRs sem descriÃ§Ã£o adequada

### **SEMPRE Fazer:**
- âœ… Criar branch para cada feature/fix
- âœ… Usar Pull Requests para merge
- âœ… Seguir padrÃ£o de commits
- âœ… Revisar cÃ³digo antes de merge
- âœ… Fechar issue apÃ³s merge

---

## ğŸ”„ **FLUXO COMPLETO**

### **Desenvolvimento de Feature:**
```bash
# 1. Atualizar develop
git checkout develop
git pull origin develop

# 2. Criar branch
git checkout -b feature/issue-123

# 3. Desenvolver
# ... fazer alteraÃ§Ãµes ...

# 4. Commit
git add -p
git commit -m "feat(user): add email validation"

# 5. Push
git push origin feature/issue-123

# 6. Criar PR no GitHub (para develop)
gh pr create --base develop --title "feat(user): add email validation" --body "Closes #123"

# 7. Aguardar revisÃ£o
# 8. Resolver feedback
# 9. Merge para develop
# 10. Fechar issue
gh issue close 123

# 11. Deletar branch
git branch -d feature/issue-123
git push origin --delete feature/issue-123
```

### **CorreÃ§Ã£o de Bug:**
```bash
# 1. Atualizar develop
git checkout develop
git pull origin develop

# 2. Criar branch
git checkout -b fix/issue-456

# 3. Corrigir
# ... fazer correÃ§Ãµes ...

# 4. Commit
git add -p
git commit -m "fix(auth): handle expired token error"

# 5. Push
git push origin fix/issue-456

# 6. Criar PR no GitHub (para develop)
gh pr create --base develop --title "fix(auth): handle expired token error" --body "Closes #456"

# 7. Aguardar revisÃ£o
# 8. Merge para develop
# 9. Fechar issue
gh issue close 456

# 10. Deletar branch
git branch -d fix/issue-456
git push origin --delete fix/issue-456
```

---

## ğŸ“Š **COMANDOS ÃšTEIS**

### **GitHub CLI (gh):**
```bash
# Issues
gh issue list                    # Listar issues
gh issue view 123               # Ver issue especÃ­fica
gh issue close 123              # Fechar issue
gh issue create --title "..."   # Criar issue

# Pull Requests
gh pr list                      # Listar PRs
gh pr view 3                    # Ver PR especÃ­fico
gh pr create --base develop --title "..." --body "..."  # Criar PR para develop
gh pr merge 3                   # Mergear PR
gh pr close 3                   # Fechar PR

# RepositÃ³rio
gh repo view                    # Ver info do repo
gh repo clone owner/repo        # Clonar repo
```

### **Git Essenciais:**
```bash
# Status e diff
git status
git diff
git diff --staged

# Adicionar arquivos
git add <arquivo>
git add -p  # Interativo
git add .   # Todos (usar com cuidado)

# Commit
git commit -m "mensagem"
git commit --amend  # Corrigir Ãºltimo commit

# Push/Pull
git push origin <branch>
git pull origin <branch>

# Branch
git branch  # Listar branches
git checkout <branch>  # Mudar branch
git checkout -b <branch>  # Criar e mudar
git branch -d <branch>  # Deletar branch
```

### **Limpeza:**
```bash
# Limpar arquivos nÃ£o rastreados
git clean -fd

# Reset para Ãºltimo commit
git reset --hard HEAD

# Reset para develop
git reset --hard origin/develop
```

---

**ğŸ’¡ Este fluxo garante organizaÃ§Ã£o, rastreabilidade e qualidade no desenvolvimento!**