---
description: Guia para anÃ¡lise de problemas e criaÃ§Ã£o de issues no GitHub
globs: ["**/*.md", "**/*.ts", "**/*.js"]
alwaysApply: false
---

# ğŸ“‹ Guia de CriaÃ§Ã£o de Issues - Barber Shop Manager

Este documento define como analisar problemas e criar issues eficazes no GitHub para o projeto NestJS.

---

## ğŸ” **ANÃLISE DE PROBLEMAS**

### **Antes de Qualquer AlteraÃ§Ã£o de CÃ³digo:**

1. **Identificar o Problema**
   - [ ] Entender completamente o que precisa ser feito
   - [ ] Verificar se jÃ¡ existe issue relacionada
   - [ ] Analisar impacto no sistema
   - [ ] Identificar dependÃªncias

2. **Contextualizar**
   - [ ] Documentar o contexto atual
   - [ ] Identificar arquivos/mÃ³dulos afetados
   - [ ] Verificar se hÃ¡ regras de negÃ³cio envolvidas
   - [ ] Considerar impacto em outras funcionalidades

---

## ğŸ“ **CRIAÃ‡ÃƒO DE ISSUES**

### **PrincÃ­pios para Issues Eficazes:**

#### âœ… **Dividir em PedaÃ§os Pequenos**
- **DuraÃ§Ã£o ideal**: 1-4 horas por issue
- **Escopo limitado**: Uma funcionalidade especÃ­fica
- **IndependÃªncia**: Sem dependÃªncias entre issues
- **Testabilidade**: Pode ser testada isoladamente

#### âœ… **Evitar Issues Muito Grandes**
- âŒ "Implementar sistema completo de agendamentos"
- âœ… "Criar DTOs para agendamento"
- âœ… "Implementar controller de criaÃ§Ã£o de agendamento"
- âœ… "Adicionar validaÃ§Ã£o de horÃ¡rios"

---

## ğŸ—ï¸ **TEMPLATE DE ISSUE**

### **TÃ­tulo**
```
[Escopo] DescriÃ§Ã£o clara e concisa
```

**Exemplos:**
- `feat(auth): add password reset functionality`
- `fix(user): handle email validation error`
- `refactor(service): simplify user creation logic`

### **DescriÃ§Ã£o**
```markdown
## ğŸ“‹ DescriÃ§Ã£o

[Contexto do problema e o que precisa ser feito]

## ğŸ¯ Objetivo

[O que esta issue vai resolver]

## ğŸ“ LocalizaÃ§Ã£o

- **Arquivos afetados**: `src/modules/user/...`
- **MÃ³dulos envolvidos**: User, Auth
- **Banco de dados**: [se aplicÃ¡vel]

## ğŸ”§ ImplementaÃ§Ã£o Sugerida

[Passos ou abordagem sugerida]

## âœ… CritÃ©rios de AceitaÃ§Ã£o

- [ ] [CritÃ©rio especÃ­fico e testÃ¡vel]
- [ ] [Outro critÃ©rio]
- [ ] [Mais um critÃ©rio]

## ğŸ·ï¸ Labels

- `feat` / `fix` / `refactor` / `docs`
- `high` / `medium` / `low` (prioridade)
- `backend` / `frontend` / `database`

## ğŸ“š ReferÃªncias

- [Links relevantes]
- [DocumentaÃ§Ã£o relacionada]
```

---

## ğŸ¯ **EXEMPLOS DE ISSUES BEM ESTRUTURADAS**

### **Issue de Feature (feat)**
```markdown
## feat(user): add email validation in user creation

### DescriÃ§Ã£o
Atualmente o sistema nÃ£o valida se o email jÃ¡ existe antes de criar um usuÃ¡rio, causando duplicatas.

### Objetivo
Implementar validaÃ§Ã£o de email Ãºnico na criaÃ§Ã£o de usuÃ¡rios.

### LocalizaÃ§Ã£o
- **Arquivo**: `src/modules/user/services/user-create.service.ts`
- **DTO**: `src/modules/user/dtos/create-user-request.dto.ts`

### ImplementaÃ§Ã£o Sugerida
1. Adicionar mÃ©todo `findByEmail` no UserRepository
2. Validar email no UserCreateService
3. LanÃ§ar exceÃ§Ã£o se email jÃ¡ existir

### CritÃ©rios de AceitaÃ§Ã£o
- [ ] Email duplicado retorna erro 409
- [ ] Mensagem de erro clara
- [ ] Teste unitÃ¡rio para validaÃ§Ã£o
- [ ] DocumentaÃ§Ã£o Swagger atualizada
```

### **Issue de Fix (fix)**
```markdown
## fix(auth): handle expired token error properly

### DescriÃ§Ã£o
Tokens expirados estÃ£o retornando erro 500 em vez de 401, causando confusÃ£o no frontend.

### Objetivo
Corrigir tratamento de tokens expirados para retornar status 401.

### LocalizaÃ§Ã£o
- **Arquivo**: `src/common/guards/jwt-auth.guard.ts`
- **Service**: `src/modules/auth/services/auth.service.ts`

### ImplementaÃ§Ã£o Sugerida
1. Verificar tipo de erro no JwtAuthGuard
2. LanÃ§ar UnauthorizedException para tokens expirados
3. Atualizar tratamento no AllExceptionsFilter

### CritÃ©rios de AceitaÃ§Ã£o
- [ ] Token expirado retorna 401
- [ ] Mensagem de erro clara
- [ ] Log apropriado gerado
- [ ] Teste de integraÃ§Ã£o atualizado
```

---

## ğŸš« **ANTI-PADRÃ•ES**

### **Issues Muito Grandes (Evitar)**
```markdown
âŒ "Implementar sistema completo de agendamentos"
âŒ "Refatorar toda a arquitetura de autenticaÃ§Ã£o"
âŒ "Adicionar testes para todo o projeto"
```

### **Issues Muito Pequenas (Evitar)**
```markdown
âŒ "Adicionar ponto e vÃ­rgula no arquivo X"
âŒ "Corrigir typo na documentaÃ§Ã£o"
âŒ "Renomear variÃ¡vel Y"
```

### **Issues Sem Contexto (Evitar)**
```markdown
âŒ "Corrigir bug"
âŒ "Melhorar cÃ³digo"
âŒ "Adicionar feature"
```

---

## ğŸ”„ **FLUXO DE CRIAÃ‡ÃƒO DE ISSUE**

1. **Analisar Problema** (5-10 min)
   - Entender completamente o que precisa ser feito
   - Verificar se jÃ¡ existe issue relacionada

2. **Dividir em PedaÃ§os** (5-10 min)
   - Quebrar em tarefas de 1-4 horas
   - Garantir independÃªncia entre issues

3. **Criar Issue** (5-10 min)
   - Usar template padronizado
   - Preencher todos os campos obrigatÃ³rios
   - Adicionar labels apropriadas

4. **Validar Issue** (2-5 min)
   - Revisar se estÃ¡ clara e completa
   - Verificar se critÃ©rios sÃ£o testÃ¡veis
   - Confirmar que nÃ£o hÃ¡ dependÃªncias

---

## ğŸ“Š **MÃ‰TRICAS DE QUALIDADE**

### **Issue Bem Estruturada:**
- âœ… TÃ­tulo claro e descritivo
- âœ… DescriÃ§Ã£o com contexto suficiente
- âœ… CritÃ©rios de aceitaÃ§Ã£o especÃ­ficos e testÃ¡veis
- âœ… DuraÃ§Ã£o estimada de 1-4 horas
- âœ… Labels apropriadas
- âœ… Sem dependÃªncias com outras issues

### **Sinais de Issue Mal Estruturada:**
- âŒ TÃ­tulo vago ("Corrigir bug")
- âŒ DescriÃ§Ã£o sem contexto
- âŒ CritÃ©rios vagos ("Funcionar corretamente")
- âŒ DuraÃ§Ã£o muito longa (>8 horas)
- âŒ MÃºltiplas dependÃªncias
- âŒ Escopo muito amplo

---

**ğŸ’¡ Lembre-se: Issues bem estruturadas facilitam o desenvolvimento e garantem qualidade no cÃ³digo!**